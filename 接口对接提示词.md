# 记账系统API接口对接指南

## 目录
1. [通用请求配置](#通用请求配置)
2. [认证与用户管理接口](#认证与用户管理接口)
3. [房间管理接口](#房间管理接口)
4. [邀请码管理接口](#邀请码管理接口)
5. [账单管理接口](#账单管理接口)
6. [支出管理接口](#支出管理接口)
7. [费用类型接口](#费用类型接口)
8. [收款码管理接口](#收款码管理接口)
9. [支付与转账接口](#支付与转账接口)
10. [支付优化/离线支付接口](#支付优化离线支付接口)
11. [特殊支付规则接口](#特殊支付规则接口)
12. [通知管理接口](#通知管理接口)
13. [用户偏好接口](#用户偏好接口)
14. [统计接口](#统计接口)
15. [异常支出接口](#异常支出接口)
16. [MFA接口](#mfa接口)
17. [管理员专用接口](#管理员专用接口)
18. [WebSocket事件接口](#websocket事件接口)
19. [接口调用流程](#接口调用流程)
20. [错误处理指南](#错误处理指南)

## 通用请求配置

### 请求基础配置
```javascript
// API基础URL
const API_BASE_URL = 'http://localhost:4000/api';

// 请求头配置
const headers = {
  'Content-Type': 'application/json',
  // 在需要认证的接口中添加
  'Authorization': `Bearer ${localStorage.getItem('token')}`
};

// 通用请求拦截器示例
axios.interceptors.request.use(config => {
  // 添加认证token
  const token = localStorage.getItem('token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// 通用响应拦截器示例
axios.interceptors.response.use(
  response => {
    // 处理标准响应格式 {success: true, data: {...}}
    return response.data;
  },
  error => {
    // 统一错误处理
    if (error.response) {
      switch (error.response.status) {
        case 401:
          // 未授权，跳转到登录页
          localStorage.removeItem('token');
          router.push('/login');
          break;
        case 403:
          // 权限不足
          message.error('您没有权限执行此操作');
          break;
        case 404:
          message.error('请求的资源不存在');
          break;
        case 500:
          message.error('服务器内部错误');
          break;
        default:
          message.error(error.response.data.message || '请求失败');
      }
    } else {
      message.error('网络错误，请检查网络连接');
    }
    return Promise.reject(error);
  }
);
```

### 数据结构说明
后端返回的数据结构为 `{success: true, data: {xxx: []}}`，前端代码应访问 `response.data.data.xxx` 而不是 `response.data.xxx`。

## 认证与用户管理接口

### 1. 用户登录
- **接口地址**: `/api/auth/login`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    username: "string", // 用户名
    password: "string"  // 密码
  }
  ```
- **成功响应处理**:
  ```javascript
  // 登录成功后保存token
  const response = await axios.post(`${API_BASE_URL}/auth/login`, loginData);
  if (response.success) {
    localStorage.setItem('token', response.data.token);
    localStorage.setItem('userInfo', JSON.stringify(response.data.user));
    // 跳转到首页
    router.push('/');
  }
  ```
- **错误处理**: 显示错误提示，如"用户名或密码错误"、"账户已被锁定"等

### 2. 用户注册
- **接口地址**: `/api/auth/register`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    username: "string",    // 用户名
    email: "string",       // 邮箱
    password: "string",    // 密码
    confirmPassword: "string" // 确认密码
  }
  ```
- **成功响应处理**: 显示注册成功提示，跳转到登录页
- **错误处理**: 显示验证错误，如"用户名已存在"、"邮箱格式不正确"等

### 3. 刷新Token
- **接口地址**: `/api/auth/refresh-token`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    refreshToken: "string" // 刷新令牌
  }
  ```
- **成功响应处理**: 更新本地存储的token
- **错误处理**: 刷新失败则跳转到登录页

### 4. 用户登出
- **接口地址**: `/api/auth/logout`
- **请求方式**: POST
- **请求参数**: 无
- **成功响应处理**: 清除本地存储的token和用户信息，跳转到登录页
- **错误处理**: 即使接口失败也清除本地存储

### 5. 获取用户信息
- **接口地址**: `/api/users/profile`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新用户状态管理中的用户信息
- **错误处理**: 显示"获取用户信息失败"提示

### 6. 更新用户信息
- **接口地址**: `/api/users/profile`
- **请求方式**: PUT
- **请求参数**:
  ```javascript
  {
    nickname: "string",   // 昵称
    avatar: "string",     // 头像URL
    phone: "string",      // 电话号码
    bio: "string"         // 个人简介
  }
  ```
- **成功响应处理**: 更新本地存储和状态管理中的用户信息
- **错误处理**: 显示更新失败的具体原因

### 7. 修改密码
- **接口地址**: `/api/users/password`
- **请求方式**: PUT
- **请求参数**:
  ```javascript
  {
    currentPassword: "string",  // 当前密码
    newPassword: "string",      // 新密码
    confirmPassword: "string"    // 确认新密码
  }
  ```
- **成功响应处理**: 显示"密码修改成功"提示
- **错误处理**: 显示"当前密码不正确"、"新密码格式不符合要求"等错误

### 8. 忘记密码
- **接口地址**: `/api/auth/forgot-password`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    email: "string" // 注册邮箱
  }
  ```
- **成功响应处理**: 显示"重置密码邮件已发送"提示
- **错误处理**: 显示"邮箱不存在"等错误

### 9. 重置密码
- **接口地址**: `/api/auth/reset-password`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    token: "string",         // 重置令牌
    newPassword: "string",   // 新密码
    confirmPassword: "string" // 确认新密码
  }
  ```
- **成功响应处理**: 显示"密码重置成功"，跳转到登录页
- **错误处理**: 显示"令牌已过期"等错误

## 房间管理接口

### 1. 获取房间列表
- **接口地址**: `/api/rooms`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新房间列表状态
- **错误处理**: 显示"获取房间列表失败"提示

### 2. 创建房间
- **接口地址**: `/api/rooms`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    name: "string",        // 房间名称
    description: "string",  // 房间描述
    maxMembers: "number"   // 最大成员数
  }
  ```
- **成功响应处理**: 显示创建成功提示，更新房间列表
- **错误处理**: 显示房间名称重复等错误

### 3. 获取房间详情
- **接口地址**: `/api/rooms/:id`
- **请求方式**: GET
- **请求参数**: 
  - id: 房间ID (路径参数)
- **成功响应处理**: 更新房间详情状态
- **错误处理**: 显示"房间不存在"等错误

### 4. 更新房间信息
- **接口地址**: `/api/rooms/:id`
- **请求方式**: PUT
- **请求参数**:
  ```javascript
  {
    name: "string",        // 房间名称
    description: "string",  // 房间描述
    maxMembers: "number"   // 最大成员数
  }
  ```
- **成功响应处理**: 显示更新成功提示，更新房间信息
- **错误处理**: 显示权限不足等错误

### 5. 删除房间
- **接口地址**: `/api/rooms/:id`
- **请求方式**: DELETE
- **请求参数**: 
  - id: 房间ID (路径参数)
- **成功响应处理**: 显示删除成功提示，更新房间列表
- **错误处理**: 显示权限不足等错误

### 6. 加入房间
- **接口地址**: `/api/rooms/join`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    inviteCode: "string"  // 邀请码
  }
  ```
- **成功响应处理**: 显示加入成功提示，更新房间列表
- **错误处理**: 显示邀请码无效等错误

### 7. 离开房间
- **接口地址**: `/api/rooms/:id/leave`
- **请求方式**: POST
- **请求参数**: 
  - id: 房间ID (路径参数)
- **成功响应处理**: 显示离开成功提示，更新房间列表
- **错误处理**: 显示权限不足等错误

### 8. 获取房间成员
- **接口地址**: `/api/rooms/:id/members`
- **请求方式**: GET
- **请求参数**: 
  - id: 房间ID (路径参数)
- **成功响应处理**: 更新房间成员列表
- **错误处理**: 显示"获取成员列表失败"提示

### 9. 移除成员
- **接口地址**: `/api/rooms/:id/members/:userId`
- **请求方式**: DELETE
- **请求参数**: 
  - id: 房间ID (路径参数)
  - userId: 用户ID (路径参数)
- **成功响应处理**: 显示移除成功提示，更新成员列表
- **错误处理**: 显示权限不足等错误

### 10. 转让寝室长
- **接口地址**: `/api/rooms/:id/transfer-ownership`
- **请求方式**: PUT
- **请求参数**:
  ```javascript
  {
    newOwnerId: "string"  // 新寝室长用户ID
  }
  ```
- **成功响应处理**: 显示转让成功提示，更新房间信息
- **错误处理**: 显示权限不足等错误

## 邀请码管理接口

### 1. 生成邀请码
- **接口地址**: `/api/rooms/:id/generate-invite-code`
- **请求方式**: POST
- **请求参数**: 
  - id: 房间ID (路径参数)
- **成功响应处理**: 显示邀请码，更新邀请码列表
- **错误处理**: 显示权限不足等错误

### 2. 获取邀请码列表
- **接口地址**: `/api/rooms/:id/invite-codes`
- **请求方式**: GET
- **请求参数**: 
  - id: 房间ID (路径参数)
- **成功响应处理**: 更新邀请码列表
- **错误处理**: 显示"获取邀请码失败"提示

### 3. 验证邀请码
- **接口地址**: `/api/rooms/verify-invite-code`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    inviteCode: "string"  // 邀请码
  }
  ```
- **成功响应处理**: 返回房间信息，显示验证成功
- **错误处理**: 显示邀请码无效等错误

### 4. 撤销邀请码
- **接口地址**: `/api/rooms/:id/revoke-invite-code`
- **请求方式**: PUT
- **请求参数**:
  ```javascript
  {
    codeId: "string"  // 邀请码ID
  }
  ```
- **成功响应处理**: 显示撤销成功提示，更新邀请码列表
- **错误处理**: 显示权限不足等错误

### 5. 删除邀请码
- **接口地址**: `/api/rooms/:id/invite-codes/:codeId`
- **请求方式**: DELETE
- **请求参数**: 
  - id: 房间ID (路径参数)
  - codeId: 邀请码ID (路径参数)
- **成功响应处理**: 显示删除成功提示，更新邀请码列表
- **错误处理**: 显示权限不足等错误

## 账单管理接口

### 1. 获取账单列表
- **接口地址**: `/api/bills`
- **请求方式**: GET
- **请求参数**:
  ```javascript
  // 查询参数
  {
    roomId: "string",    // 房间ID (可选)
    status: "string",    // 状态 (可选)
    page: "number",      // 页码 (可选)
    limit: "number"      // 每页数量 (可选)
  }
  ```
- **成功响应处理**: 更新账单列表状态
- **错误处理**: 显示"获取账单列表失败"提示

### 2. 创建账单
- **接口地址**: `/api/bills`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    roomId: "string",           // 房间ID
    title: "string",            // 账单标题
    amount: "number",           // 金额
    description: "string",      // 描述
    dueDate: "string",          // 到期日期
    participants: ["string"],   // 参与者ID数组
    splitType: "string"         // 分摊类型
  }
  ```
- **成功响应处理**: 显示创建成功提示，更新账单列表
- **错误处理**: 显示金额格式错误等错误

### 3. 获取账单详情
- **接口地址**: `/api/bills/:id`
- **请求方式**: GET
- **请求参数**: 
  - id: 账单ID (路径参数)
- **成功响应处理**: 更新账单详情状态
- **错误处理**: 显示"账单不存在"等错误

### 4. 更新账单
- **接口地址**: `/api/bills/:id`
- **请求方式**: PUT
- **请求参数**:
  ```javascript
  {
    title: "string",            // 账单标题
    amount: "number",           // 金额
    description: "string",      // 描述
    dueDate: "string",          // 到期日期
    participants: ["string"],   // 参与者ID数组
    splitType: "string"         // 分摊类型
  }
  ```
- **成功响应处理**: 显示更新成功提示，更新账单信息
- **错误处理**: 显示权限不足等错误

### 5. 删除账单
- **接口地址**: `/api/bills/:id`
- **请求方式**: DELETE
- **请求参数**: 
  - id: 账单ID (路径参数)
- **成功响应处理**: 显示删除成功提示，更新账单列表
- **错误处理**: 显示权限不足等错误

### 6. 上传账单凭证
- **接口地址**: `/api/bills/receipt`
- **请求方式**: POST
- **请求参数**: 
  - FormData: 文件上传
- **成功响应处理**: 显示上传成功提示，更新账单凭证
- **错误处理**: 显示文件格式不支持等错误

### 7. 账单审核
- **接口地址**: `/api/bills/:id/review`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    approved: "boolean",  // 是否通过
    comment: "string"      // 审核意见
  }
  ```
- **成功响应处理**: 显示审核成功提示，更新账单状态
- **错误处理**: 显示权限不足等错误

### 8. 确认支付
- **接口地址**: `/api/bills/:id/payment`
- **请求方式**: POST
- **请求参数**: 
  - id: 账单ID (路径参数)
- **成功响应处理**: 显示支付成功提示，更新账单状态
- **错误处理**: 显示支付失败等错误

### 9. 账单分摊
- **接口地址**: `/api/bills/:id/split`
- **请求方式**: PUT
- **请求参数**: 
  - id: 账单ID (路径参数)
- **成功响应处理**: 显示分摊成功提示，更新账单分摊信息
- **错误处理**: 显示分摊失败等错误

### 10. 获取账单结算记录
- **接口地址**: `/api/bills/:bill_id/settlements`
- **请求方式**: GET
- **请求参数**: 
  - bill_id: 账单ID (路径参数)
- **成功响应处理**: 更新结算记录列表
- **错误处理**: 显示"获取结算记录失败"提示

### 11. 创建账单结算
- **接口地址**: `/api/bills/:bill_id/settlements`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    amount: "number",        // 结算金额
    method: "string",        // 结算方式
    notes: "string"          // 备注
  }
  ```
- **成功响应处理**: 显示创建成功提示，更新结算记录
- **错误处理**: 显示创建失败等错误

### 12. 获取用户账单统计
- **接口地址**: `/api/bills/stats/user`
- **请求方式**: GET
- **请求参数**:
  ```javascript
  // 查询参数
  {
    startDate: "string",  // 开始日期 (可选)
    endDate: "string"      // 结束日期 (可选)
  }
  ```
- **成功响应处理**: 更新用户账单统计数据
- **错误处理**: 显示"获取统计数据失败"提示

### 13. 获取房间账单统计
- **接口地址**: `/api/bills/stats/room`
- **请求方式**: GET
- **请求参数**:
  ```javascript
  // 查询参数
  {
    roomId: "string",     // 房间ID
    startDate: "string",   // 开始日期 (可选)
    endDate: "string"      // 结束日期 (可选)
  }
  ```
- **成功响应处理**: 更新房间账单统计数据
- **错误处理**: 显示"获取统计数据失败"提示

### 14. 获取日期范围账单统计
- **接口地址**: `/api/bills/stats/date-range`
- **请求方式**: GET
- **请求参数**:
  ```javascript
  // 查询参数
  {
    startDate: "string",  // 开始日期
    endDate: "string"      // 结束日期
  }
  ```
- **成功响应处理**: 更新日期范围账单统计数据
- **错误处理**: 显示"获取统计数据失败"提示

## 支出管理接口

### 1. 获取支出列表
- **接口地址**: `/api/expenses`
- **请求方式**: GET
- **请求参数**:
  ```javascript
  // 查询参数
  {
    roomId: "string",    // 房间ID (可选)
    categoryId: "string", // 类别ID (可选)
    status: "string",    // 状态 (可选)
    page: "number",      // 页码 (可选)
    limit: "number"      // 每页数量 (可选)
  }
  ```
- **成功响应处理**: 更新支出列表状态
- **错误处理**: 显示"获取支出列表失败"提示

### 2. 创建支出
- **接口地址**: `/api/expenses`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    roomId: "string",           // 房间ID
    title: "string",            // 支出标题
    amount: "number",           // 金额
    categoryId: "string",       // 类别ID
    description: "string",      // 描述
    date: "string",             // 支出日期
    paidBy: "string",           // 支付者ID
    splitBetween: ["string"],   // 分摊对象ID数组
    splitType: "string"         // 分摊类型
  }
  ```
- **成功响应处理**: 显示创建成功提示，更新支出列表
- **错误处理**: 显示金额格式错误等错误

### 3. 获取支出详情
- **接口地址**: `/api/expenses/:id`
- **请求方式**: GET
- **请求参数**: 
  - id: 支出ID (路径参数)
- **成功响应处理**: 更新支出详情状态
- **错误处理**: 显示"支出不存在"等错误

### 4. 更新支出
- **接口地址**: `/api/expenses/:id`
- **请求方式**: PUT
- **请求参数**:
  ```javascript
  {
    title: "string",            // 支出标题
    amount: "number",           // 金额
    categoryId: "string",       // 类别ID
    description: "string",      // 描述
    date: "string",             // 支出日期
    paidBy: "string",           // 支付者ID
    splitBetween: ["string"],   // 分摊对象ID数组
    splitType: "string"         // 分摊类型
  }
  ```
- **成功响应处理**: 显示更新成功提示，更新支出信息
- **错误处理**: 显示权限不足等错误

### 5. 删除支出
- **接口地址**: `/api/expenses/:id`
- **请求方式**: DELETE
- **请求参数**: 
  - id: 支出ID (路径参数)
- **成功响应处理**: 显示删除成功提示，更新支出列表
- **错误处理**: 显示权限不足等错误

### 6. 确认分摊支付
- **接口地址**: `/api/expenses/splits/:id/confirm`
- **请求方式**: POST
- **请求参数**: 
  - id: 分摊ID (路径参数)
- **成功响应处理**: 显示确认成功提示，更新支出状态
- **错误处理**: 显示确认失败等错误

### 7. 计算智能分摊
- **接口地址**: `/api/expenses/calculate-split`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    expenses: ["string"],   // 支出ID数组
    participants: ["string"], // 参与者ID数组
    splitType: "string"      // 分摊类型
  }
  ```
- **成功响应处理**: 返回计算结果，更新分摊信息
- **错误处理**: 显示计算失败等错误

### 8. 获取支出收款码
- **接口地址**: `/api/expenses/:expenseId/qr-code`
- **请求方式**: GET
- **请求参数**: 
  - expenseId: 支出ID (路径参数)
- **成功响应处理**: 显示收款码
- **错误处理**: 显示"获取收款码失败"提示

### 9. 确认支出支付
- **接口地址**: `/api/expenses/:expenseId/payments/confirm`
- **请求方式**: POST
- **请求参数**: 
  - expenseId: 支出ID (路径参数)
- **成功响应处理**: 显示支付成功提示，更新支出状态
- **错误处理**: 显示支付失败等错误

### 10. 获取支出支付状态
- **接口地址**: `/api/expenses/:expenseId/payment-status`
- **请求方式**: GET
- **请求参数**: 
  - expenseId: 支出ID (路径参数)
- **成功响应处理**: 更新支付状态
- **错误处理**: 显示"获取支付状态失败"提示

### 11. 获取用户支出支付记录
- **接口地址**: `/api/expenses/payments/user`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新用户支付记录列表
- **错误处理**: 显示"获取支付记录失败"提示

### 12. 获取房间支出统计
- **接口地址**: `/api/expenses/stats/room/:roomId`
- **请求方式**: GET
- **请求参数**: 
  - roomId: 房间ID (路径参数)
- **成功响应处理**: 更新房间支出统计数据
- **错误处理**: 显示"获取统计数据失败"提示

## 费用类型接口

### 1. 获取费用类型列表
- **接口地址**: `/api/expense-types`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新费用类型列表
- **错误处理**: 显示"获取费用类型失败"提示

### 2. 创建费用类型
- **接口地址**: `/api/expense-types`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    name: "string",        // 类型名称
    description: "string",  // 类型描述
    icon: "string",         // 图标
    color: "string"         // 颜色
  }
  ```
- **成功响应处理**: 显示创建成功提示，更新费用类型列表
- **错误处理**: 显示类型名称重复等错误

### 3. 获取默认费用类型
- **接口地址**: `/api/expense-types/default`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新默认费用类型列表
- **错误处理**: 显示"获取默认费用类型失败"提示

### 4. 获取费用类型详情
- **接口地址**: `/api/expense-types/:id`
- **请求方式**: GET
- **请求参数**: 
  - id: 费用类型ID (路径参数)
- **成功响应处理**: 更新费用类型详情
- **错误处理**: 显示"费用类型不存在"等错误

### 5. 更新费用类型
- **接口地址**: `/api/expense-types/:id`
- **请求方式**: PUT
- **请求参数**:
  ```javascript
  {
    name: "string",        // 类型名称
    description: "string",  // 类型描述
    icon: "string",         // 图标
    color: "string"         // 颜色
  }
  ```
- **成功响应处理**: 显示更新成功提示，更新费用类型信息
- **错误处理**: 显示权限不足等错误

### 6. 删除费用类型
- **接口地址**: `/api/expense-types/:id`
- **请求方式**: DELETE
- **请求参数**: 
  - id: 费用类型ID (路径参数)
- **成功响应处理**: 显示删除成功提示，更新费用类型列表
- **错误处理**: 显示权限不足等错误

## 收款码管理接口

### 1. 获取收款码列表
- **接口地址**: `/api/qr-codes`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新收款码列表
- **错误处理**: 显示"获取收款码失败"提示

### 2. 上传收款码
- **接口地址**: `/api/qr-codes/upload`
- **请求方式**: POST
- **请求参数**: 
  - FormData: 文件上传
- **成功响应处理**: 显示上传成功提示，更新收款码列表
- **错误处理**: 显示文件格式不支持等错误

### 3. 更新收款码状态
- **接口地址**: `/api/qr-codes/:id/status`
- **请求方式**: PATCH
- **请求参数**:
  ```javascript
  {
    status: "string"  // 状态: active/inactive
  }
  ```
- **成功响应处理**: 显示更新成功提示，更新收款码状态
- **错误处理**: 显示权限不足等错误

### 4. 设置默认收款码
- **接口地址**: `/api/qr-codes/:id/default`
- **请求方式**: PATCH
- **请求参数**: 
  - id: 收款码ID (路径参数)
- **成功响应处理**: 显示设置成功提示，更新收款码列表
- **错误处理**: 显示权限不足等错误

### 5. 删除收款码
- **接口地址**: `/api/qr-codes/:id`
- **请求方式**: DELETE
- **请求参数**: 
  - id: 收款码ID (路径参数)
- **成功响应处理**: 显示删除成功提示，更新收款码列表
- **错误处理**: 显示权限不足等错误

### 6. 获取默认收款码
- **接口地址**: `/api/qr-codes/default`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新默认收款码
- **错误处理**: 显示"获取默认收款码失败"提示

## 支付与转账接口

### 1. 获取账单支付二维码
- **接口地址**: `/api/payments/bills/:billId/qr-code`
- **请求方式**: GET
- **请求参数**: 
  - billId: 账单ID (路径参数)
- **成功响应处理**: 显示支付二维码
- **错误处理**: 显示"获取支付二维码失败"提示

### 2. 确认账单支付
- **接口地址**: `/api/payments/bills/:billId/confirm`
- **请求方式**: POST
- **请求参数**: 
  - billId: 账单ID (路径参数)
- **成功响应处理**: 显示支付成功提示，更新账单状态
- **错误处理**: 显示支付失败等错误

### 3. 获取账单支付状态
- **接口地址**: `/api/payments/bills/:billId/status`
- **请求方式**: GET
- **请求参数**: 
  - billId: 账单ID (路径参数)
- **成功响应处理**: 更新支付状态
- **错误处理**: 显示"获取支付状态失败"提示

### 4. 获取用户支付记录
- **接口地址**: `/api/payments/user`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新用户支付记录列表
- **错误处理**: 显示"获取支付记录失败"提示

## 支付转移接口

### 1. 获取支付转移列表
- **接口地址**: `/api/payment-transfers`
- **请求方式**: GET
- **请求参数**:
  ```javascript
  // 查询参数
  {
    status: "string",    // 状态 (可选)
    page: "number",      // 页码 (可选)
    limit: "number"      // 每页数量 (可选)
  }
  ```
- **成功响应处理**: 更新支付转移列表
- **错误处理**: 显示"获取支付转移列表失败"提示

### 2. 创建支付转移
- **接口地址**: `/api/payment-transfers`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    fromUserId: "string",  // 转出用户ID
    toUserId: "string",    // 转入用户ID
    amount: "number",      // 转移金额
    description: "string"   // 描述
  }
  ```
- **成功响应处理**: 显示创建成功提示，更新支付转移列表
- **错误处理**: 显示金额格式错误等错误

### 3. 获取支付转移详情
- **接口地址**: `/api/payment-transfers/:id`
- **请求方式**: GET
- **请求参数**: 
  - id: 支付转移ID (路径参数)
- **成功响应处理**: 更新支付转移详情
- **错误处理**: 显示"支付转移不存在"等错误

### 4. 确认支付转移
- **接口地址**: `/api/payment-transfers/:id/confirm`
- **请求方式**: PUT
- **请求参数**: 
  - id: 支付转移ID (路径参数)
- **成功响应处理**: 显示确认成功提示，更新支付转移状态
- **错误处理**: 显示权限不足等错误

### 5. 取消支付转移
- **接口地址**: `/api/payment-transfers/:id/cancel`
- **请求方式**: PUT
- **请求参数**: 
  - id: 支付转移ID (路径参数)
- **成功响应处理**: 显示取消成功提示，更新支付转移状态
- **错误处理**: 显示权限不足等错误

## 支付优化/离线支付接口

### 1. 创建离线支付
- **接口地址**: `/api/payment-optimization/offline-payments`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    billId: "string",      // 账单ID
    amount: "number",      // 支付金额
    method: "string",      // 支付方式
    notes: "string"        // 备注
  }
  ```
- **成功响应处理**: 显示创建成功提示，更新离线支付列表
- **错误处理**: 显示创建失败等错误

### 2. 同步离线支付
- **接口地址**: `/api/payment-optimization/offline-payments/:paymentId/sync`
- **请求方式**: PUT
- **请求参数**: 
  - paymentId: 支付ID (路径参数)
- **成功响应处理**: 显示同步成功提示，更新支付状态
- **错误处理**: 显示同步失败等错误

### 3. 获取用户离线支付
- **接口地址**: `/api/payment-optimization/offline-payments/user/:userId`
- **请求方式**: GET
- **请求参数**: 
  - userId: 用户ID (路径参数)
- **成功响应处理**: 更新用户离线支付列表
- **错误处理**: 显示"获取离线支付失败"提示

### 4. 获取待处理离线支付
- **接口地址**: `/api/payment-optimization/offline-payments/pending`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新待处理离线支付列表
- **错误处理**: 显示"获取待处理支付失败"提示

### 5. 创建支付提醒
- **接口地址**: `/api/payment-optimization/reminders`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    billId: "string",      // 账单ID
    userId: "string",      // 用户ID
    remindAt: "string",    // 提醒时间
    message: "string"       // 提醒消息
  }
  ```
- **成功响应处理**: 显示创建成功提示，更新提醒列表
- **错误处理**: 显示创建失败等错误

### 6. 获取用户支付提醒
- **接口地址**: `/api/payment-optimization/reminders/user/:userId`
- **请求方式**: GET
- **请求参数**: 
  - userId: 用户ID (路径参数)
- **成功响应处理**: 更新用户支付提醒列表
- **错误处理**: 显示"获取支付提醒失败"提示

### 7. 获取支付优化记录
- **接口地址**: `/api/payment-optimization/records`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新支付优化记录列表
- **错误处理**: 显示"获取记录失败"提示

### 8. 获取支付优化记录详情
- **接口地址**: `/api/payment-optimization/records/:paymentId`
- **请求方式**: GET
- **请求参数**: 
  - paymentId: 支付ID (路径参数)
- **成功响应处理**: 更新支付优化记录详情
- **错误处理**: 显示"记录不存在"等错误

### 9. 获取用户支付优化统计
- **接口地址**: `/api/payment-optimization/stats/user/:userId`
- **请求方式**: GET
- **请求参数**: 
  - userId: 用户ID (路径参数)
- **成功响应处理**: 更新用户支付优化统计数据
- **错误处理**: 显示"获取统计数据失败"提示

### 10. 获取房间支付优化统计
- **接口地址**: `/api/payment-optimization/stats/room/:roomId`
- **请求方式**: GET
- **请求参数**: 
  - roomId: 房间ID (路径参数)
- **成功响应处理**: 更新房间支付优化统计数据
- **错误处理**: 显示"获取统计数据失败"提示

### 11. 触发支付优化任务
- **接口地址**: `/api/payment-optimization/tasks/trigger/:taskName`
- **请求方式**: POST
- **请求参数**: 
  - taskName: 任务名称 (路径参数)
- **成功响应处理**: 显示任务触发成功提示
- **错误处理**: 显示任务触发失败等错误

### 12. 获取支付优化任务状态
- **接口地址**: `/api/payment-optimization/tasks/status`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新任务状态列表
- **错误处理**: 显示"获取任务状态失败"提示

## 特殊支付规则接口

### 1. 获取房间特殊支付规则
- **接口地址**: `/api/special-payments/rooms/:roomId/rules`
- **请求方式**: GET
- **请求参数**: 
  - roomId: 房间ID (路径参数)
- **成功响应处理**: 更新特殊支付规则列表
- **错误处理**: 显示"获取规则失败"提示

### 2. 创建特殊支付规则
- **接口地址**: `/api/special-payments/rooms/:roomId/rules`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    name: "string",        // 规则名称
    description: "string",  // 规则描述
    condition: "object",   // 触发条件
    action: "object"       // 执行动作
  }
  ```
- **成功响应处理**: 显示创建成功提示，更新规则列表
- **错误处理**: 显示权限不足等错误

### 3. 更新特殊支付规则
- **接口地址**: `/api/special-payments/rules/:ruleId`
- **请求方式**: PUT
- **请求参数**:
  ```javascript
  {
    name: "string",        // 规则名称
    description: "string",  // 规则描述
    condition: "object",   // 触发条件
    action: "object"       // 执行动作
  }
  ```
- **成功响应处理**: 显示更新成功提示，更新规则信息
- **错误处理**: 显示权限不足等错误

### 4. 删除特殊支付规则
- **接口地址**: `/api/special-payments/rules/:ruleId`
- **请求方式**: DELETE
- **请求参数**: 
  - ruleId: 规则ID (路径参数)
- **成功响应处理**: 显示删除成功提示，更新规则列表
- **错误处理**: 显示权限不足等错误

### 5. 获取账单适用规则
- **接口地址**: `/api/special-payments/bills/:billId/applicable-rules`
- **请求方式**: GET
- **请求参数**: 
  - billId: 账单ID (路径参数)
- **成功响应处理**: 更新适用规则列表
- **错误处理**: 显示"获取适用规则失败"提示

### 6. 应用特殊支付规则
- **接口地址**: `/api/special-payments/bills/:billId/rules/:ruleId/apply`
- **请求方式**: POST
- **请求参数**: 
  - billId: 账单ID (路径参数)
  - ruleId: 规则ID (路径参数)
- **成功响应处理**: 显示应用成功提示，更新账单状态
- **错误处理**: 显示权限不足等错误

### 7. 创建账单转移
- **接口地址**: `/api/special-payments/bills/:billId/transfers`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    fromUserId: "string",  // 转出用户ID
    toUserId: "string",    // 转入用户ID
    amount: "number",      // 转移金额
    reason: "string"       // 转移原因
  }
  ```
- **成功响应处理**: 显示创建成功提示，更新转移记录
- **错误处理**: 显示创建失败等错误

### 8. 获取账单转移记录
- **接口地址**: `/api/special-payments/bills/:billId/transfers`
- **请求方式**: GET
- **请求参数**: 
  - billId: 账单ID (路径参数)
- **成功响应处理**: 更新账单转移记录列表
- **错误处理**: 显示"获取转移记录失败"提示

## 通知管理接口

### 1. 获取通知列表
- **接口地址**: `/api/notifications`
- **请求方式**: GET
- **请求参数**:
  ```javascript
  // 查询参数
  {
    type: "string",      // 通知类型 (可选)
    read: "boolean",     // 是否已读 (可选)
    page: "number",      // 页码 (可选)
    limit: "number"      // 每页数量 (可选)
  }
  ```
- **成功响应处理**: 更新通知列表
- **错误处理**: 显示"获取通知失败"提示

### 2. 获取未读通知数量
- **接口地址**: `/api/notifications/unread-count`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新未读通知数量
- **错误处理**: 显示"获取未读数量失败"提示

### 3. 标记通知已读
- **接口地址**: `/api/notifications/:id/read`
- **请求方式**: PUT
- **请求参数**: 
  - id: 通知ID (路径参数)
- **成功响应处理**: 显示标记成功提示，更新通知状态
- **错误处理**: 显示标记失败等错误

### 4. 批量标记已读
- **接口地址**: `/api/notifications/mark-all-read`
- **请求方式**: PUT
- **请求参数**: 无
- **成功响应处理**: 显示标记成功提示，更新通知列表
- **错误处理**: 显示标记失败等错误

### 5. 删除通知
- **接口地址**: `/api/notifications/:id`
- **请求方式**: DELETE
- **请求参数**: 
  - id: 通知ID (路径参数)
- **成功响应处理**: 显示删除成功提示，更新通知列表
- **错误处理**: 显示删除失败等错误

### 6. 创建通知
- **接口地址**: `/api/notifications`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    title: "string",      // 通知标题
    content: "string",    // 通知内容
    type: "string",       // 通知类型
    recipients: ["string"] // 接收者ID数组
  }
  ```
- **成功响应处理**: 显示创建成功提示，更新通知列表
- **错误处理**: 显示创建失败等错误

### 7. 获取账单到期提醒
- **接口地址**: `/api/notifications/bill-due-reminders`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新账单到期提醒列表
- **错误处理**: 显示"获取提醒失败"提示

### 8. 获取支付状态变更通知
- **接口地址**: `/api/notifications/payment-status-changes`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新支付状态变更通知列表
- **错误处理**: 显示"获取通知失败"提示

## 通知设置接口

### 1. 获取通知设置
- **接口地址**: `/api/notification-settings`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新通知设置
- **错误处理**: 显示"获取通知设置失败"提示

### 2. 更新通知设置
- **接口地址**: `/api/notification-settings`
- **请求方式**: PUT
- **请求参数**:
  ```javascript
  {
    emailNotifications: "boolean",    // 邮件通知开关
    pushNotifications: "boolean",     // 推送通知开关
    billReminders: "boolean",         // 账单提醒开关
    paymentUpdates: "boolean"         // 支付更新开关
  }
  ```
- **成功响应处理**: 显示更新成功提示，更新通知设置
- **错误处理**: 显示更新失败等错误

### 3. 检查通知设置
- **接口地址**: `/api/notification-settings/check`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 返回通知设置状态
- **错误处理**: 显示"检查通知设置失败"提示

## 用户偏好接口

### 1. 获取用户偏好
- **接口地址**: `/api/user-preferences`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新用户偏好
- **错误处理**: 显示"获取用户偏好失败"提示

### 2. 获取特定用户偏好
- **接口地址**: `/api/user-preferences/:category/:key`
- **请求方式**: GET
- **请求参数**: 
  - category: 偏好类别 (路径参数)
  - key: 偏好键 (路径参数)
- **成功响应处理**: 更新特定用户偏好
- **错误处理**: 显示"获取用户偏好失败"提示

### 3. 更新特定用户偏好
- **接口地址**: `/api/user-preferences/:category/:key`
- **请求方式**: PUT
- **请求参数**:
  ```javascript
  {
    value: "any"  // 偏好值
  }
  ```
- **成功响应处理**: 显示更新成功提示，更新用户偏好
- **错误处理**: 显示更新失败等错误

### 4. 更新类别用户偏好
- **接口地址**: `/api/user-preferences/:category`
- **请求方式**: PUT
- **请求参数**:
  ```javascript
  {
    preferences: "object"  // 偏好对象
  }
  ```
- **成功响应处理**: 显示更新成功提示，更新用户偏好
- **错误处理**: 显示更新失败等错误

### 5. 删除特定用户偏好
- **接口地址**: `/api/user-preferences/:category/:key`
- **请求方式**: DELETE
- **请求参数**: 
  - category: 偏好类别 (路径参数)
  - key: 偏好键 (路径参数)
- **成功响应处理**: 显示删除成功提示，更新用户偏好
- **错误处理**: 显示删除失败等错误

## 统计接口

### 1. 获取用户统计
- **接口地址**: `/api/stats/user`
- **请求方式**: GET
- **请求参数**:
  ```javascript
  // 查询参数
  {
    startDate: "string",  // 开始日期 (可选)
    endDate: "string"      // 结束日期 (可选)
  }
  ```
- **成功响应处理**: 更新用户统计数据
- **错误处理**: 显示"获取统计数据失败"提示

### 2. 获取房间统计
- **接口地址**: `/api/stats/room`
- **请求方式**: GET
- **请求参数**:
  ```javascript
  // 查询参数
  {
    roomId: "string",     // 房间ID
    startDate: "string",  // 开始日期 (可选)
    endDate: "string"      // 结束日期 (可选)
  }
  ```
- **成功响应处理**: 更新房间统计数据
- **错误处理**: 显示"获取统计数据失败"提示

### 3. 获取系统统计
- **接口地址**: `/api/stats/system`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新系统统计数据
- **错误处理**: 显示权限不足等错误

### 4. 获取预测统计
- **接口地址**: `/api/stats/forecast`
- **请求方式**: GET
- **请求参数**:
  ```javascript
  // 查询参数
  {
    type: "string",       // 预测类型
    period: "string"      // 预测周期
  }
  ```
- **成功响应处理**: 更新预测统计数据
- **错误处理**: 显示"获取预测数据失败"提示

## 异常支出接口

### 1. 检测异常支出
- **接口地址**: `/api/abnormal-expenses/detect`
- **请求方式**: POST
- **请求参数**: 无
- **成功响应处理**: 更新异常支出列表
- **错误处理**: 显示权限不足等错误

### 2. 获取异常支出列表
- **接口地址**: `/api/abnormal-expenses`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新异常支出列表
- **错误处理**: 显示权限不足等错误

### 3. 获取异常支出统计
- **接口地址**: `/api/abnormal-expenses/stats`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新异常支出统计数据
- **错误处理**: 显示权限不足等错误

### 4. 更新异常支出状态
- **接口地址**: `/api/abnormal-expenses/:id/status`
- **请求方式**: PUT
- **请求参数**:
  ```javascript
  {
    status: "string",  // 状态
    notes: "string"    // 备注
  }
  ```
- **成功响应处理**: 显示更新成功提示，更新异常支出状态
- **错误处理**: 显示权限不足等错误

## MFA接口

### 1. 获取MFA状态
- **接口地址**: `/api/mfa/status`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新MFA状态
- **错误处理**: 显示"获取MFA状态失败"提示

### 2. 设置MFA
- **接口地址**: `/api/mfa/setup`
- **请求方式**: POST
- **请求参数**: 无
- **成功响应处理**: 显示设置成功提示，更新MFA状态
- **错误处理**: 显示设置失败等错误

### 3. 验证MFA
- **接口地址**: `/api/mfa/verify`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    code: "string"  // 验证码
  }
  ```
- **成功响应处理**: 显示验证成功提示
- **错误处理**: 显示验证码错误等错误

### 4. 禁用MFA
- **接口地址**: `/api/mfa/disable`
- **请求方式**: POST
- **请求参数**: 无
- **成功响应处理**: 显示禁用成功提示，更新MFA状态
- **错误处理**: 显示禁用失败等错误

## 管理员专用接口

### 1. 管理员登录
- **接口地址**: `/api/admin/auth/login`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    username: "string", // 用户名
    password: "string"  // 密码
  }
  ```
- **成功响应处理**: 保存管理员token，跳转到管理后台
- **错误处理**: 显示登录失败提示

### 2. 获取管理员列表
- **接口地址**: `/api/admin/users`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新管理员列表
- **错误处理**: 显示权限不足等错误

### 3. 创建管理员
- **接口地址**: `/api/admin/users`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    username: "string",  // 用户名
    email: "string",     // 邮箱
    password: "string",  // 密码
    roles: ["string"]    // 角色ID数组
  }
  ```
- **成功响应处理**: 显示创建成功提示，更新管理员列表
- **错误处理**: 显示创建失败等错误

### 4. 更新管理员信息
- **接口地址**: `/api/admin/users/:id`
- **请求方式**: PUT
- **请求参数**:
  ```javascript
  {
    username: "string",  // 用户名
    email: "string",     // 邮箱
    status: "string"     // 状态
  }
  ```
- **成功响应处理**: 显示更新成功提示，更新管理员信息
- **错误处理**: 显示权限不足等错误

### 5. 删除管理员
- **接口地址**: `/api/admin/users/:id`
- **请求方式**: DELETE
- **请求参数**: 
  - id: 管理员ID (路径参数)
- **成功响应处理**: 显示删除成功提示，更新管理员列表
- **错误处理**: 显示权限不足等错误

### 6. 分配角色
- **接口地址**: `/api/admin/users/:id/roles`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    roles: ["string"]  // 角色ID数组
  }
  ```
- **成功响应处理**: 显示分配成功提示，更新管理员角色
- **错误处理**: 显示权限不足等错误

### 7. 获取权限列表
- **接口地址**: `/api/admin/permissions`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新权限列表
- **错误处理**: 显示权限不足等错误

### 8. 获取角色列表
- **接口地址**: `/api/admin/roles`
- **请求方式**: GET
- **请求参数**: 无
- **成功响应处理**: 更新角色列表
- **错误处理**: 显示权限不足等错误

### 9. 创建角色
- **接口地址**: `/api/admin/roles`
- **请求方式**: POST
- **请求参数**:
  ```javascript
  {
    name: "string",        // 角色名称
    description: "string",  // 角色描述
    permissions: ["string"] // 权限ID数组
  }
  ```
- **成功响应处理**: 显示创建成功提示，更新角色列表
- **错误处理**: 显示创建失败等错误

### 10. 更新角色
- **接口地址**: `/api/admin/roles/:id`
- **请求方式**: PUT
- **请求参数**:
  ```javascript
  {
    name: "string",        // 角色名称
    description: "string",  // 角色描述
    permissions: ["string"] // 权限ID数组
  }
  ```
- **成功响应处理**: 显示更新成功提示，更新角色信息
- **错误处理**: 显示权限不足等错误

### 11. 删除角色
- **接口地址**: `/api/admin/roles/:id`
- **请求方式**: DELETE
- **请求参数**: 
  - id: 角色ID (路径参数)
- **成功响应处理**: 显示删除成功提示，更新角色列表
- **错误处理**: 显示权限不足等错误

## WebSocket事件接口

### 1. 连接WebSocket
- **接口地址**: `ws://localhost:4000/ws`
- **连接方式**: WebSocket
- **连接参数**: 无
- **成功处理**: 建立连接，监听事件
- **错误处理**: 显示连接失败提示，尝试重连

### 2. 监听支付确认事件
- **事件名称**: `payment_confirmed`
- **事件数据**:
  ```javascript
  {
    billId: "string",    // 账单ID
    userId: "string",    // 用户ID
    amount: "number",    // 金额
    timestamp: "string"  // 时间戳
  }
  ```
- **处理方式**: 更新账单支付状态，显示通知

### 3. 监听费用创建事件
- **事件名称**: `expense_created`
- **事件数据**:
  ```javascript
  {
    expenseId: "string", // 支出ID
    roomId: "string",    // 房间ID
    title: "string",     // 支出标题
    amount: "number",    // 金额
    timestamp: "string"  // 时间戳
  }
  ```
- **处理方式**: 更新支出列表，显示通知

### 4. 监听账单生成事件
- **事件名称**: `bill_created`
- **事件数据**:
  ```javascript
  {
    billId: "string",    // 账单ID
    roomId: "string",    // 房间ID
    title: "string",     // 账单标题
    amount: "number",    // 金额
    timestamp: "string"  // 时间戳
  }
  ```
- **处理方式**: 更新账单列表，显示通知

### 5. 监听通知事件
- **事件名称**: `notification`
- **事件数据**:
  ```javascript
  {
    id: "string",        // 通知ID
    title: "string",     // 通知标题
    content: "string",   // 通知内容
    type: "string",      // 通知类型
    timestamp: "string"  // 时间戳
  }
  ```
- **处理方式**: 更新通知列表，显示通知

## 接口调用流程

### 1. 用户登录流程
```
用户输入账号密码 → 调用登录接口 → 验证成功 → 保存token → 获取用户信息 → 跳转到首页
```

### 2. 创建账单流程
```
填写账单信息 → 调用创建账单接口 → 创建成功 → 上传凭证(可选) → 通知参与者
```

### 3. 支付账单流程
```
查看账单详情 → 获取支付二维码 → 扫码支付 → 调用确认支付接口 → 更新支付状态
```

### 4. 房间管理流程
```
创建房间 → 生成邀请码 → 分享邀请码 → 用户加入房间 → 管理房间成员
```

## 错误处理指南

### 1. 网络错误处理
```javascript
// 网络错误重试机制
const retryRequest = async (fn, retries = 3) => {
  try {
    return await fn();
  } catch (error) {
    if (retries <= 0) throw error;
    await new Promise(resolve => setTimeout(resolve, 1000));
    return retryRequest(fn, retries - 1);
  }
};
```

### 2. 权限错误处理
```javascript
// 权限错误跳转
if (error.response && error.response.status === 403) {
  message.error('您没有权限执行此操作');
  // 根据情况跳转到相应页面
  router.push('/dashboard');
}
```

### 3. 数据验证错误处理
```javascript
// 表单验证错误处理
if (error.response && error.response.data.errors) {
  const errors = error.response.data.errors;
  // 显示具体字段错误
  Object.keys(errors).forEach(field => {
    message.error(`${field}: ${errors[field]}`);
  });
}
```

### 4. 服务器错误处理
```javascript
// 服务器错误处理
if (error.response && error.response.status >= 500) {
  message.error('服务器错误，请稍后再试');
  // 记录错误日志
  console.error('Server Error:', error.response.data);
}
```

## 接口调试方法

### 1. 使用浏览器开发者工具
- 打开Network选项卡
- 查看API请求和响应
- 检查请求头和参数

### 2. 使用Postman测试接口
- 导入API集合
- 设置环境变量
- 测试各种场景

### 3. 添加请求日志
```javascript
// 添加请求日志
axios.interceptors.request.use(config => {
  console.log('Request:', config);
  return config;
});

axios.interceptors.response.use(response => {
  console.log('Response:', response);
  return response;
});
```

## 常见问题解决方案

### 1. 跨域问题
- 检查服务器CORS配置
- 确认前端请求URL正确

### 2. Token过期问题
- 监听401错误
- 自动刷新token
- 刷新失败跳转登录页

### 3. 数据格式问题
- 检查请求Content-Type
- 确认数据格式正确
- 处理日期格式

### 4. 文件上传问题
- 使用FormData
- 设置正确的Content-Type
- 处理上传进度

---

## 总结

本接口对接指南涵盖了记账系统所有API接口的对接方法，包括请求地址、请求方式、请求参数、成功响应处理和错误处理方式。在实际开发中，请根据具体页面需求选择合适的接口，并确保正确处理各种错误情况。

对于前端页面，建议使用统一的API调用封装，包括请求拦截、响应拦截和错误统一处理，以提高代码复用性和维护性。

对于管理端页面，除了基本的CRUD操作外，还需要注意权限控制和数据验证，确保系统安全性和数据完整性。

如有任何问题，请参考API路由索引和API接口设计文档，或联系后端开发人员获取更多技术支持。