{"numFailedTestSuites":1,"numFailedTests":13,"numPassedTestSuites":0,"numPassedTests":6,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":1,"numTodoTests":0,"numTotalTestSuites":1,"numTotalTests":19,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1762157594211,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["费用类型管理API集成测试","POST /api/expense-types"],"duration":405,"failureDetails":[{"matcherResult":{"actual":500,"expected":201,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m201\u001b[39m\nReceived: \u001b[31m500\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m201\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n    at Object.toBe (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\tests\\integration\\expense-types.test.js:62:31)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"费用类型管理API集成测试 POST /api/expense-types 应该成功创建费用类型","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该成功创建费用类型"},{"ancestorTitles":["费用类型管理API集成测试","POST /api/expense-types"],"duration":443,"failureDetails":[],"failureMessages":[],"fullName":"费用类型管理API集成测试 POST /api/expense-types 应该在未认证时返回401错误","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"应该在未认证时返回401错误"},{"ancestorTitles":["费用类型管理API集成测试","POST /api/expense-types"],"duration":338,"failureDetails":[],"failureMessages":[],"fullName":"费用类型管理API集成测试 POST /api/expense-types 应该在缺少必填字段时返回400错误","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"应该在缺少必填字段时返回400错误"},{"ancestorTitles":["费用类型管理API集成测试","POST /api/expense-types"],"duration":323,"failureDetails":[{"matcherResult":{"actual":500,"expected":409,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m409\u001b[39m\nReceived: \u001b[31m500\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m409\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n    at Object.toBe (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\tests\\integration\\expense-types.test.js:111:31)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"费用类型管理API集成测试 POST /api/expense-types 应该在费用类型名称已存在时返回409错误","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该在费用类型名称已存在时返回409错误"},{"ancestorTitles":["费用类型管理API集成测试","GET /api/expense-types"],"duration":487,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at id (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\tests\\integration\\expense-types.test.js:137:45)\n    at Array.find (<anonymous>)\n    at Object.find (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\tests\\integration\\expense-types.test.js:136:59)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"费用类型管理API集成测试 GET /api/expense-types 应该成功获取费用类型列表","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"failed","title":"应该成功获取费用类型列表"},{"ancestorTitles":["费用类型管理API集成测试","GET /api/expense-types"],"duration":320,"failureDetails":[],"failureMessages":[],"fullName":"费用类型管理API集成测试 GET /api/expense-types 应该支持分页查询","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"应该支持分页查询"},{"ancestorTitles":["费用类型管理API集成测试","GET /api/expense-types"],"duration":327,"failureDetails":[{"code":"ERR_UNESCAPED_CHARACTERS"}],"failureMessages":["TypeError: Request path contains unescaped characters\n    at new ClientRequest (node:_http_client:182:13)\n    at Object.request (node:http:101:10)\n    at Test.request (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\superagent\\src\\node\\index.js:808:22)\n    at Test.request [as end] (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\superagent\\src\\node\\index.js:986:8)\n    at Test.end (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\supertest\\lib\\test.js:118:11)\n    at end (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\superagent\\src\\request-base.js:285:12)\n    at new Promise (<anonymous>)\n    at Test.Object.<anonymous>.RequestBase.then (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\superagent\\src\\request-base.js:267:31)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"费用类型管理API集成测试 GET /api/expense-types 应该支持按名称筛选","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该支持按名称筛选"},{"ancestorTitles":["费用类型管理API集成测试","GET /api/expense-types"],"duration":329,"failureDetails":[],"failureMessages":[],"fullName":"费用类型管理API集成测试 GET /api/expense-types 应该支持按创建者筛选","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"应该支持按创建者筛选"},{"ancestorTitles":["费用类型管理API集成测试","GET /api/expense-types/default"],"duration":295,"failureDetails":[],"failureMessages":[],"fullName":"费用类型管理API集成测试 GET /api/expense-types/default 应该成功获取默认费用类型列表","invocations":1,"location":null,"numPassingAsserts":14,"retryReasons":[],"status":"passed","title":"应该成功获取默认费用类型列表"},{"ancestorTitles":["费用类型管理API集成测试","GET /api/expense-types/:id"],"duration":307,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\tests\\integration\\expense-types.test.js:205:52)\n    at Promise.then.completed (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"费用类型管理API集成测试 GET /api/expense-types/:id 应该成功获取费用类型详情","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该成功获取费用类型详情"},{"ancestorTitles":["费用类型管理API集成测试","GET /api/expense-types/:id"],"duration":303,"failureDetails":[{"matcherResult":{"actual":500,"expected":404,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m404\u001b[39m\nReceived: \u001b[31m500\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m404\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n    at Object.toBe (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\tests\\integration\\expense-types.test.js:223:31)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"费用类型管理API集成测试 GET /api/expense-types/:id 应该在费用类型不存在时返回404错误","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该在费用类型不存在时返回404错误"},{"ancestorTitles":["费用类型管理API集成测试","PUT /api/expense-types/:id"],"duration":446,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\tests\\integration\\expense-types.test.js:232:52)\n    at Promise.then.completed (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"费用类型管理API集成测试 PUT /api/expense-types/:id 应该成功更新费用类型信息","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该成功更新费用类型信息"},{"ancestorTitles":["费用类型管理API集成测试","PUT /api/expense-types/:id"],"duration":312,"failureDetails":[{"matcherResult":{"actual":500,"expected":404,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m404\u001b[39m\nReceived: \u001b[31m500\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m404\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n    at Object.toBe (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\tests\\integration\\expense-types.test.js:258:31)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"费用类型管理API集成测试 PUT /api/expense-types/:id 应该在费用类型不存在时返回404错误","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该在费用类型不存在时返回404错误"},{"ancestorTitles":["费用类型管理API集成测试","PUT /api/expense-types/:id"],"duration":403,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\tests\\integration\\expense-types.test.js:273:59)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"费用类型管理API集成测试 PUT /api/expense-types/:id 应该在费用类型名称已存在时返回409错误","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该在费用类型名称已存在时返回409错误"},{"ancestorTitles":["费用类型管理API集成测试","DELETE /api/expense-types/:id"],"duration":501,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\tests\\integration\\expense-types.test.js:312:60)\n    at Promise.then.completed (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"费用类型管理API集成测试 DELETE /api/expense-types/:id 应该成功删除费用类型","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该成功删除费用类型"},{"ancestorTitles":["费用类型管理API集成测试","DELETE /api/expense-types/:id"],"duration":319,"failureDetails":[{"matcherResult":{"actual":500,"expected":404,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m404\u001b[39m\nReceived: \u001b[31m500\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m404\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n    at Object.toBe (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\tests\\integration\\expense-types.test.js:333:31)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"费用类型管理API集成测试 DELETE /api/expense-types/:id 应该在费用类型不存在时返回404错误","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该在费用类型不存在时返回404错误"},{"ancestorTitles":["费用类型管理API集成测试","DELETE /api/expense-types/:id"],"duration":383,"failureDetails":[],"failureMessages":[],"fullName":"费用类型管理API集成测试 DELETE /api/expense-types/:id 应该在尝试删除系统默认费用类型时返回403错误","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"应该在尝试删除系统默认费用类型时返回403错误"},{"ancestorTitles":["费用类型管理API集成测试","权限测试"],"duration":429,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\tests\\integration\\expense-types.test.js:409:59)\n    at Promise.then.completed (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"费用类型管理API集成测试 权限测试 应该在非创建者尝试更新费用类型时返回403错误","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该在非创建者尝试更新费用类型时返回403错误"},{"ancestorTitles":["费用类型管理API集成测试","权限测试"],"duration":286,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\tests\\integration\\expense-types.test.js:422:62)\n    at Promise.then.completed (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"费用类型管理API集成测试 权限测试 应该在非创建者尝试删除费用类型时返回403错误","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该在非创建者尝试删除费用类型时返回403错误"}],"coverage":{},"endTime":1762157603444,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m费用类型管理API集成测试 › POST /api/expense-types › 应该成功创建费用类型\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m201\u001b[39m\n    Received: \u001b[31m500\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 60 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 61 |\u001b[39m       \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 62 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m201\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 63 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 64 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'费用类型创建成功'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 65 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'测试费用类型'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/expense-types.test.js\u001b[39m\u001b[0m\u001b[2m:62:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m费用类型管理API集成测试 › POST /api/expense-types › 应该在费用类型名称已存在时返回409错误\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m409\u001b[39m\n    Received: \u001b[31m500\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 109 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 110 |\u001b[39m       \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 111 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m409\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 112 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 113 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'费用类型名称已存在'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 114 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/expense-types.test.js\u001b[39m\u001b[0m\u001b[2m:111:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m费用类型管理API集成测试 › GET /api/expense-types › 应该成功获取费用类型列表\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 135 |\u001b[39m       \u001b[90m// 验证创建的费用类型在列表中\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 136 |\u001b[39m       \u001b[36mconst\u001b[39m createdType \u001b[33m=\u001b[39m response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mexpenseTypes\u001b[33m.\u001b[39mfind(\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 137 |\u001b[39m         type \u001b[33m=>\u001b[39m type\u001b[33m.\u001b[39mid \u001b[33m===\u001b[39m testExpenseType\u001b[33m.\u001b[39mid\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 138 |\u001b[39m       )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 139 |\u001b[39m       expect(createdType)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 140 |\u001b[39m       expect(createdType\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'测试费用类型'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat id (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/expense-types.test.js\u001b[39m\u001b[0m\u001b[2m:137:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at Array.find (<anonymous>)\u001b[22m\n\u001b[2m      \u001b[2mat Object.find (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/expense-types.test.js\u001b[39m\u001b[0m\u001b[2m:136:59)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m费用类型管理API集成测试 › GET /api/expense-types › 应该支持按名称筛选\u001b[39m\u001b[22m\n\n    TypeError: Request path contains unescaped characters\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.request (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:808:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.request [as end] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:986:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.end (\u001b[22m\u001b[2mnode_modules/supertest/lib/test.js\u001b[2m:118:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat end (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:285:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.Object.<anonymous>.RequestBase.then (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:267:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m费用类型管理API集成测试 › GET /api/expense-types/:id › 应该成功获取费用类型详情\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 203 |\u001b[39m     it(\u001b[32m'应该成功获取费用类型详情'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 204 |\u001b[39m       \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 205 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/expense-types/${testExpenseType.id}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 206 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 207 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 208 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.id (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/expense-types.test.js\u001b[39m\u001b[0m\u001b[2m:205:52)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m费用类型管理API集成测试 › GET /api/expense-types/:id › 应该在费用类型不存在时返回404错误\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m404\u001b[39m\n    Received: \u001b[31m500\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 221 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 222 |\u001b[39m       \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 223 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m404\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 224 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 225 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'费用类型不存在'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 226 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/expense-types.test.js\u001b[39m\u001b[0m\u001b[2m:223:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m费用类型管理API集成测试 › PUT /api/expense-types/:id › 应该成功更新费用类型信息\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 230 |\u001b[39m     it(\u001b[32m'应该成功更新费用类型信息'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 231 |\u001b[39m       \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 232 |\u001b[39m         \u001b[33m.\u001b[39mput(\u001b[32m`/api/expense-types/${testExpenseType.id}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 233 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 234 |\u001b[39m         \u001b[33m.\u001b[39msend({\u001b[22m\n\u001b[2m     \u001b[90m 235 |\u001b[39m           name\u001b[33m:\u001b[39m \u001b[32m'更新后的费用类型'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.id (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/expense-types.test.js\u001b[39m\u001b[0m\u001b[2m:232:52)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m费用类型管理API集成测试 › PUT /api/expense-types/:id › 应该在费用类型不存在时返回404错误\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m404\u001b[39m\n    Received: \u001b[31m500\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 256 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 257 |\u001b[39m       \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 258 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m404\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 259 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 260 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'费用类型不存在'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 261 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/expense-types.test.js\u001b[39m\u001b[0m\u001b[2m:258:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m费用类型管理API集成测试 › PUT /api/expense-types/:id › 应该在费用类型名称已存在时返回409错误\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 271 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 272 |\u001b[39m       \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 273 |\u001b[39m       \u001b[36mconst\u001b[39m anotherTypeId \u001b[33m=\u001b[39m anotherTypeResponse\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mid\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 274 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 275 |\u001b[39m       \u001b[90m// 尝试将第一个费用类型更新为与第二个相同的名称\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 276 |\u001b[39m       \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.id (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/expense-types.test.js\u001b[39m\u001b[0m\u001b[2m:273:59)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m费用类型管理API集成测试 › DELETE /api/expense-types/:id › 应该成功删除费用类型\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 310 |\u001b[39m     it(\u001b[32m'应该成功删除费用类型'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 311 |\u001b[39m       \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 312 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`/api/expense-types/${deletableExpenseType.id}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 313 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 314 |\u001b[39m       \u001b[22m\n\u001b[2m     \u001b[90m 315 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.id (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/expense-types.test.js\u001b[39m\u001b[0m\u001b[2m:312:60)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m费用类型管理API集成测试 › DELETE /api/expense-types/:id › 应该在费用类型不存在时返回404错误\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m404\u001b[39m\n    Received: \u001b[31m500\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 331 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 332 |\u001b[39m       \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 333 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m404\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 334 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 335 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'费用类型不存在'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 336 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/expense-types.test.js\u001b[39m\u001b[0m\u001b[2m:333:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m费用类型管理API集成测试 › 权限测试 › 应该在非创建者尝试更新费用类型时返回403错误\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 407 |\u001b[39m     it(\u001b[32m'应该在非创建者尝试更新费用类型时返回403错误'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 408 |\u001b[39m       \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 409 |\u001b[39m         \u001b[33m.\u001b[39mput(\u001b[32m`/api/expense-types/${anotherUserExpenseType.id}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 410 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m) \u001b[90m// 使用第一个用户的令牌\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 411 |\u001b[39m         \u001b[33m.\u001b[39msend({\u001b[22m\n\u001b[2m     \u001b[90m 412 |\u001b[39m           name\u001b[33m:\u001b[39m \u001b[32m'尝试更新的费用类型'\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.id (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/expense-types.test.js\u001b[39m\u001b[0m\u001b[2m:409:59)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m费用类型管理API集成测试 › 权限测试 › 应该在非创建者尝试删除费用类型时返回403错误\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 420 |\u001b[39m     it(\u001b[32m'应该在非创建者尝试删除费用类型时返回403错误'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 421 |\u001b[39m       \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 422 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`/api/expense-types/${anotherUserExpenseType.id}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 423 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${authToken}`\u001b[39m) \u001b[90m// 使用第一个用户的令牌\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 424 |\u001b[39m         \u001b[33m.\u001b[39msend()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 425 |\u001b[39m       \u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.id (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/expense-types.test.js\u001b[39m\u001b[0m\u001b[2m:422:62)\u001b[22m\u001b[2m\u001b[22m\n\n\n  \u001b[1m● \u001b[22mTest suite failed to run\n\n    SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string\n\n    \u001b[0m \u001b[90m 400 |\u001b[39m     afterAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 401 |\u001b[39m       \u001b[36mconst\u001b[39m pool \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mPool\u001b[39m()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 402 |\u001b[39m       \u001b[36mawait\u001b[39m pool\u001b[33m.\u001b[39mquery(\u001b[32m'DELETE FROM expense_types WHERE created_by = $1'\u001b[39m\u001b[33m,\u001b[39m [anotherUser\u001b[33m.\u001b[39mid])\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 403 |\u001b[39m       \u001b[36mawait\u001b[39m pool\u001b[33m.\u001b[39mquery(\u001b[32m'DELETE FROM users WHERE id = $1'\u001b[39m\u001b[33m,\u001b[39m [anotherUser\u001b[33m.\u001b[39mid])\u001b[33m;\u001b[39m\n     \u001b[90m 404 |\u001b[39m       \u001b[36mawait\u001b[39m pool\u001b[33m.\u001b[39mend()\u001b[33m;\u001b[39m\n     \u001b[90m 405 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      \u001b[2mat \u001b[22mnode_modules/pg-pool/index.js\u001b[2m:45:11\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22mtests/integration/expense-types.test.js\u001b[2m:402:7)\u001b[22m\n\n  \u001b[1m● \u001b[22mTest suite failed to run\n\n    SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string\n\n    \u001b[0m \u001b[90m 39 |\u001b[39m   \n     \u001b[90m 40 |\u001b[39m   \u001b[90m// 删除测试用户创建的费用类型\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 41 |\u001b[39m   \u001b[36mawait\u001b[39m pool\u001b[33m.\u001b[39mquery(\u001b[32m'DELETE FROM expense_types WHERE created_by = $1'\u001b[39m\u001b[33m,\u001b[39m [testUser\u001b[33m.\u001b[39mid])\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 42 |\u001b[39m   \n     \u001b[90m 43 |\u001b[39m   \u001b[90m// 删除测试用户\u001b[39m\n     \u001b[90m 44 |\u001b[39m   \u001b[36mawait\u001b[39m pool\u001b[33m.\u001b[39mquery(\u001b[32m'DELETE FROM users WHERE id = $1'\u001b[39m\u001b[33m,\u001b[39m [testUser\u001b[33m.\u001b[39mid])\u001b[33m;\u001b[39m\u001b[0m\n\n      \u001b[2mat \u001b[22mnode_modules/pg-pool/index.js\u001b[2m:45:11\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22mtests/integration/expense-types.test.js\u001b[2m:41:3)\u001b[22m\n","name":"C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\tests\\integration\\expense-types.test.js","startTime":1762157603444,"status":"failed","summary":""}],"wasInterrupted":false}
