# 寝室费用分摊记账系统

## 项目概述

这是一个基于Vue 3 + Node.js的寝室费用分摊记账系统，支持费用管理、账单生成、智能分摊、扫码支付等功能。系统采用前后端分离架构，提供现代化的用户界面和强大的功能支持。

## 技术栈

### 前端技术栈
- **框架**: Vue 3.3.4 + Composition API
- **UI组件库**: Element Plus 2.3.8
- **路由**: Vue Router 4.2.4
- **构建工具**: Vite 4.4.5
- **HTTP客户端**: Axios 1.4.0
- **二维码生成**: qrcode 1.5.3

### 后端技术栈
- **框架**: Node.js + Express
- **数据库**: PostgreSQL 13.0+ (主数据库), Redis 6.0+ (缓存数据库)
- **实时通信**: WebSocket
- **安全**: Helmet, CORS
- **日志**: Winston

### 开发工具
- **代码规范**: ESLint + Prettier
- **包管理**: npm
- **版本控制**: Git

## 项目结构

```
记账系统/
├── Client application/          # 前端应用
│   ├── src/
│   │   ├── views/              # 页面组件
│   │   │   ├── Home.vue        # 首页
│   │   │   └── NotFound.vue    # 404页面
│   │   ├── router/             # 路由配置
│   │   ├── components/         # 通用组件
│   │   └── utils/              # 工具函数
│   ├── package.json
│   ├── vite.config.js
│   └── index.html
├── Server-side/                 # 后端服务
│   ├── config/                 # 配置文件
│   ├── controllers/            # 控制器
│   ├── services/              # 业务逻辑
│   ├── package.json
│   └── server.js
├── Admin panel/                # 管理端应用
│   ├── src/
│   │   ├── views/              # 管理端页面
│   │   │   ├── AdminHome.vue   # 管理首页
│   │   │   └── NotFound.vue    # 404页面
│   │   ├── router/             # 路由配置
│   │   └── App.vue             # 主应用组件
│   ├── package.json
│   ├── vite.config.js
│   └── index.html
└── 项目介绍与启动指南.md        # 项目文档
```

## 环境要求

### 系统要求
- **操作系统**: Windows 10+, macOS 10.14+, Ubuntu 18.04+
- **Node.js**: >= 16.0.0 (当前版本: 20.19.3)
- **PostgreSQL**: >= 13.0
- **Redis**: >= 6.0

### 开发工具
- **代码编辑器**: VS Code (推荐)
- **数据库管理工具**: pgAdmin (推荐)
- **API测试工具**: Postman (推荐)

## 安装与启动

### 1. 环境检查

确保已安装Node.js：
```bash
node --version
# 应该输出: v20.19.3 或更高版本

npm --version
# 应该输出: 10.2.3 或更高版本
```

### 2. 安装依赖

#### 前端依赖安装
```bash
cd "Client application"
npm install
```

#### 后端依赖安装
```bash
cd "Server-side"
npm install
```

### 3. 数据库配置

1. 安装并启动PostgreSQL数据库
2. 创建数据库：
   ```sql
   -- 开发环境数据库
   CREATE DATABASE test_expense_system;
   
   -- 生产环境数据库
   CREATE DATABASE prod_expense_system;
   ```

3. 安装并启动Redis服务器

### 4. 环境变量配置

#### 后端环境配置
在 `Server-side/` 目录下配置环境变量：

**开发环境 (.env.development)**
```env
NODE_ENV=development
PORT=4000
DB_HOST=localhost
DB_PORT=5432
DB_NAME=test_expense_system
DB_USER=postgres
DB_PASSWORD=your_password
REDIS_URL=redis://localhost:6379
JWT_SECRET=your_jwt_secret
```

**生产环境 (.env.production)**
```env
NODE_ENV=production
PORT=4000
DB_HOST=localhost
DB_PORT=5432
DB_NAME=prod_expense_system
DB_USER=postgres
DB_PASSWORD=your_password
REDIS_URL=redis://localhost:6379
JWT_SECRET=your_jwt_secret
```

### 5. 启动应用

#### 启动后端服务 (端口: 4000)
```bash
cd "Server-side"

# 开发环境
npm run dev

# 生产环境
npm start
```

#### 启动前端应用 (端口: 8000)
```bash
cd "Client application"

# 开发环境
npm run dev

# 生产构建
npm run build

# 预览生产版本
npm run preview
```

#### 启动管理端应用 (端口: 8100)
```bash
cd "Admin panel"

# 开发环境
npm run dev

# 生产构建
npm run build

# 预览生产版本
npm run preview
```

## 访问地址

- **前端应用**: http://localhost:8000
- **后端API**: http://localhost:4000
- **管理端应用**: http://localhost:8100
- **健康检查**: http://localhost:4000/health

## 功能特性

### 已实现功能
- ✅ 项目基础架构搭建
- ✅ Vue 3 Composition API集成
- ✅ Element Plus UI组件库
- ✅ Vue Router路由管理
- ✅ 响应式设计 (PC端优先)
- ✅ 首页和404页面
- ✅ 后端API服务框架
- ✅ PostgreSQL数据库集成
- ✅ Redis缓存集成
- ✅ WebSocket实时通信

### 待开发功能
- ⏳ 费用管理功能
- ⏳ 支付码管理
- ⏳ 智能分摊算法
- ⏳ 统计分析报表
- ⏳ 用户认证系统
- ⏳ 寝室管理功能

## 开发说明

### Vue 3导入方式
项目使用Vue 3的Composition API和`<script setup>`语法：

```vue
<script setup>
import { ref, computed, onMounted } from 'vue'
import { useRouter } from 'vue-router'

const router = useRouter()
const count = ref(0)

const doubleCount = computed(() => count.value * 2)

onMounted(() => {
  console.log('组件已挂载')
})
</script>
```

### 响应式设计
- 默认针对PC端设计
- 保留基础移动端响应式支持
- 使用CSS Grid和Flexbox布局
- 支持现代浏览器特性

### 代码规范
- 使用ESLint进行代码检查
- Prettier自动格式化
- 遵循Vue 3最佳实践
- 使用TypeScript风格的类型提示

## 常见问题

### 端口占用问题
如果端口被占用，可以修改配置文件：

**前端端口修改** (`Client application/vite.config.js`)
```javascript
server: {
  port: 8000, // 修改为其他端口
}
```

**后端端口修改** (`Server-side/.env.*`)
```env
PORT=4000 // 修改为其他端口
```

### 数据库连接问题
1. 确保PostgreSQL服务正在运行
2. 检查数据库连接配置是否正确
3. 验证数据库用户权限

### 依赖安装问题
如果依赖安装失败，可以尝试：
```bash
# 清除缓存
npm cache clean --force

# 重新安装
rm -rf node_modules package-lock.json
npm install
```

## 开发计划

### 近期计划
1. 完善用户认证系统
2. 开发费用管理核心功能
3. 实现支付码上传和管理
4. 添加智能分摊算法

### 长期规划
1. 移动端适配优化
2. 高级统计分析功能
3. 多租户支持
4. 云部署优化

## 贡献指南

1. Fork项目仓库
2. 创建功能分支
3. 提交代码变更
4. 发起Pull Request

## 许可证

本项目采用MIT许可证。

---

**最后更新**: 2025-11-02  
**版本**: 1.0.0