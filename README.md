# å¯å®¤è´¹ç”¨åˆ†æ‘Šè®°è´¦ç³»ç»Ÿ

ä¸€ä¸ªåŸºäºNode.js + Express + PostgreSQL + Vue 3çš„ç°ä»£åŒ–å¯å®¤è´¹ç”¨åˆ†æ‘Šè®°è´¦ç³»ç»Ÿï¼Œå¸®åŠ©å®¤å‹é—´å…¬å¹³åˆ†æ‘Šæ—¥å¸¸å¼€é”€ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### ç”¨æˆ·åŠŸèƒ½
- âœ… ç”¨æˆ·æ³¨å†Œä¸ç™»å½•ï¼ˆJWTè®¤è¯ï¼‰
- âœ… å¯å®¤åˆ›å»ºä¸ç®¡ç†ï¼ˆé‚€è¯·ç æœºåˆ¶ï¼‰
- âœ… è´¹ç”¨è®°å½•ä¸åˆ†ç±»ç®¡ç†ï¼ˆå¤šç§è´¹ç”¨ç±»å‹ï¼‰
- âœ… å¤šç§è´¹ç”¨åˆ†æ‘Šæ–¹å¼ï¼ˆå¹³å‡ã€æŒ‰å¤©æ•°ã€è‡ªå®šä¹‰ã€æŒ‰é¢ç§¯ï¼‰
- âœ… è´¦å•ç”Ÿæˆä¸æ”¯ä»˜ç¡®è®¤ï¼ˆæ”¯æŒå¾®ä¿¡/æ”¯ä»˜å®æ”¶æ¬¾ç ï¼‰
- âœ… å®æ—¶é€šçŸ¥æé†’ï¼ˆWebSocketï¼‰
- âœ… è´¹ç”¨ç»Ÿè®¡ä¸è¶‹åŠ¿åˆ†æï¼ˆEChartså›¾è¡¨ï¼‰
- âœ… å¤šè®¾å¤‡åŒæ­¥ï¼ˆå“åº”å¼è®¾è®¡ï¼‰
- âœ… äº‰è®®å¤„ç†ä¸å®¡æ ¸æµç¨‹

### ç®¡ç†åŠŸèƒ½
- âœ… ç³»ç»Ÿç®¡ç†ï¼šç”¨æˆ·ç®¡ç†ã€å¯å®¤ç®¡ç†ã€ç³»ç»Ÿé…ç½®
- âœ… æ•°æ®ç»Ÿè®¡ï¼šè´¹ç”¨ç»Ÿè®¡ã€ç”¨æˆ·æ´»è·ƒåº¦ã€ç³»ç»Ÿä½¿ç”¨æƒ…å†µ
- âœ… å®¡æ ¸ç®¡ç†ï¼šè´¹ç”¨å®¡æ ¸ã€äº‰è®®å¤„ç†ã€å¼‚å¸¸ç›‘æ§
- âœ… æ—¥å¿—ç®¡ç†ï¼šæ“ä½œæ—¥å¿—ã€ç³»ç»Ÿæ—¥å¿—ã€å®¡è®¡è¿½è¸ª
- âœ… æ–‡æ¡£ç®¡ç†ï¼šAPIæ–‡æ¡£ã€æ•°æ®åº“æ–‡æ¡£ã€éœ€æ±‚æ–‡æ¡£

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **è¿è¡Œç¯å¢ƒ**: Node.js 16.x+
- **Webæ¡†æ¶**: Express.js 4.18.2
- **æ•°æ®åº“**: PostgreSQL 14+
- **ç¼“å­˜**: Redis 6+ (å¯é€‰)
- **è®¤è¯**: JWT (JSON Web Tokens)
- **å®æ—¶é€šä¿¡**: WebSocket (ws 8.13.0)
- **æ–‡ä»¶ä¸Šä¼ **: Multer 2.0.2
- **æ—¥å¿—ç®¡ç†**: Winston 3.10.0
- **å®‰å…¨**: Helmet 7.0.0, bcryptjs 2.4.3
- **æµ‹è¯•æ¡†æ¶**: Jest 29.7.0, Supertest 6.3.3

### å‰ç«¯æŠ€æœ¯
- **æ¡†æ¶**: Vue 3.3.4 + Composition API
- **æ„å»ºå·¥å…·**: Vite 4.4.5
- **UIç»„ä»¶åº“**: Element Plus 2.3.8
- **çŠ¶æ€ç®¡ç†**: Pinia 2.1.6 + Vuex 4.0.2
- **è·¯ç”±ç®¡ç†**: Vue Router 4.2.4
- **HTTPå®¢æˆ·ç«¯**: Axios 1.4.0
- **å›¾è¡¨åº“**: ECharts 6.0.0
- **æµ‹è¯•æ¡†æ¶**: Vitest 0.34.6

### ç®¡ç†åå°æŠ€æœ¯
- **æ¡†æ¶**: Vue 3.3.4
- **UIç»„ä»¶åº“**: Element Plus 2.3.8
- **å›¾è¡¨åº“**: ECharts 6.0.0
- **æ„å»ºå·¥å…·**: Vite 4.4.5

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 16.x æˆ–æ›´é«˜ç‰ˆæœ¬
- PostgreSQL 14+ æ•°æ®åº“
- Redis 6+ (å¯é€‰ï¼Œç”¨äºç¼“å­˜å’Œä¼šè¯å­˜å‚¨)

### æœ¬åœ°å¼€å‘

1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/MH063/expense-sharing-system.git
cd expense-sharing-system
```

2. å®‰è£…åç«¯ä¾èµ–
```bash
cd Server-side
npm install
```

3. é…ç½®åç«¯ç¯å¢ƒå˜é‡
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.development.example .env.development

# ç¼–è¾‘ .env.development æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥å’Œå…¶ä»–ç¯å¢ƒå˜é‡
# ç¡®ä¿ä»¥ä¸‹é…ç½®æ­£ç¡®ï¼š
# DB_HOST=localhost
# DB_PORT=5432
# DB_USER=postgres
# DB_PASSWORD=your_password
# DB_NAME=test_expense_system
```

4. åˆå§‹åŒ–æ•°æ®åº“
```bash
# åˆ›å»ºæµ‹è¯•æ•°æ®åº“ï¼ˆåœ¨PostgreSQLä¸­æ‰§è¡Œï¼‰
psql -U postgres -c "CREATE DATABASE test_expense_system;"

# åˆå§‹åŒ–æ•°æ®åº“è¡¨ç»“æ„
npm run init:testdb
```

5. å¯åŠ¨åç«¯æœåŠ¡
```bash
# å¼€å‘æ¨¡å¼å¯åŠ¨
npm run dev

# æˆ–è€…ç”Ÿäº§æ¨¡å¼å¯åŠ¨
npm run prod
```

6. å®‰è£…å‰ç«¯ä¾èµ–
```bash
cd ../Client\ application
npm install
```

7. å¯åŠ¨å‰ç«¯åº”ç”¨
```bash
npm run dev
```

8. å®‰è£…ç®¡ç†åå°ä¾èµ–ï¼ˆå¯é€‰ï¼‰
```bash
cd ../Admin\ panel
npm install
```

9. å¯åŠ¨ç®¡ç†åå°
```bash
npm run dev
```

### è®¿é—®åœ°å€

- å‰ç«¯åº”ç”¨: http://localhost:8000
- åç«¯API: http://localhost:4000
- ç®¡ç†åå°: http://localhost:8100
- APIå¥åº·æ£€æŸ¥: http://localhost:4000/health

### ç”Ÿäº§éƒ¨ç½²

1. æ„å»ºå‰ç«¯åº”ç”¨
```bash
cd Client\ application
npm run build
```

2. æ„å»ºç®¡ç†åå°
```bash
cd ../Admin\ panel
npm run build
```

3. å¯åŠ¨åç«¯æœåŠ¡
```bash
cd ../Server-side
npm run prod
```

## ğŸ”§ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„
```
expense-sharing-system/
â”œâ”€â”€ Client application/          # å‰ç«¯åº”ç”¨ (Vue 3)
â”‚   â”œâ”€â”€ public/                  # é™æ€èµ„æº
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/                 # APIè¯·æ±‚æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ assets/              # èµ„æºæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ components/          # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ router/              # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ stores/              # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ views/               # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ analytics/       # æ•°æ®åˆ†æé¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/            # è®¤è¯ç›¸å…³é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ bills/           # è´¦å•ç®¡ç†é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ disputes/        # äº‰è®®å¤„ç†é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ expenses/        # æ”¯å‡ºç®¡ç†é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ reviews/         # è¯„è®ºç®¡ç†é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ rooms/           # æˆ¿é—´ç®¡ç†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ App.vue              # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.js              # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.js
â”œâ”€â”€ Admin panel/                 # ç®¡ç†åå° (Vue 3)
â”‚   â”œâ”€â”€ public/                  # é™æ€èµ„æº
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/                 # APIè¯·æ±‚æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ assets/              # èµ„æºæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ components/          # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ router/              # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ stores/              # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ views/               # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ config/          # ç³»ç»Ÿé…ç½®é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ docs/            # æ–‡æ¡£ç®¡ç†é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ review/          # å®¡æ ¸ç®¡ç†é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ system/          # ç³»ç»Ÿç®¡ç†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ App.vue              # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.js              # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.js
â”œâ”€â”€ Server-side/                 # åç«¯æœåŠ¡ (Node.js)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ controllers/         # æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ bill-controller.js
â”‚   â”‚   â”‚   â”œâ”€â”€ expense-controller.js
â”‚   â”‚   â”‚   â”œâ”€â”€ expense-type-controller.js
â”‚   â”‚   â”‚   â”œâ”€â”€ room-controller.js
â”‚   â”‚   â”‚   â”œâ”€â”€ stats-controller.js
â”‚   â”‚   â”‚   â””â”€â”€ user-controller.js
â”‚   â”‚   â”œâ”€â”€ middleware/          # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ routes/              # è·¯ç”±å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ services/            # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ app.js               # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ tests/                   # æµ‹è¯•æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ integration/         # é›†æˆæµ‹è¯•
â”‚   â”‚   â””â”€â”€ unit/                # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ scripts/                 # è„šæœ¬æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ init-test-database.sql
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ .env.development.example
â”œâ”€â”€ docs/                        # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ README.md
```

### API æ–‡æ¡£

#### è®¤è¯ç›¸å…³
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/logout` - ç”¨æˆ·ç™»å‡º
- `GET /api/auth/profile` - è·å–ç”¨æˆ·ä¿¡æ¯
- `PUT /api/auth/profile` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯

#### æˆ¿é—´ç®¡ç†
- `GET /api/rooms` - è·å–ç”¨æˆ·æˆ¿é—´åˆ—è¡¨
- `POST /api/rooms` - åˆ›å»ºæˆ¿é—´
- `GET /api/rooms/:id` - è·å–æˆ¿é—´è¯¦æƒ…
- `PUT /api/rooms/:id` - æ›´æ–°æˆ¿é—´ä¿¡æ¯
- `DELETE /api/rooms/:id` - åˆ é™¤æˆ¿é—´
- `POST /api/rooms/:id/join` - åŠ å…¥æˆ¿é—´

#### è´¹ç”¨ç®¡ç†
- `GET /api/expenses` - è·å–è´¹ç”¨åˆ—è¡¨
- `POST /api/expenses` - åˆ›å»ºè´¹ç”¨
- `GET /api/expenses/:id` - è·å–è´¹ç”¨è¯¦æƒ…
- `PUT /api/expenses/:id` - æ›´æ–°è´¹ç”¨
- `DELETE /api/expenses/:id` - åˆ é™¤è´¹ç”¨

#### è´¦å•ç®¡ç†
- `GET /api/bills` - è·å–è´¦å•åˆ—è¡¨
- `POST /api/bills` - åˆ›å»ºè´¦å•
- `GET /api/bills/:id` - è·å–è´¦å•è¯¦æƒ…
- `PUT /api/bills/:id` - æ›´æ–°è´¦å•
- `POST /api/bills/:id/confirm` - ç¡®è®¤æ”¯ä»˜

#### è´¹ç”¨ç±»å‹
- `GET /api/expense-types` - è·å–è´¹ç”¨ç±»å‹åˆ—è¡¨
- `POST /api/expense-types` - åˆ›å»ºè´¹ç”¨ç±»å‹
- `PUT /api/expense-types/:id` - æ›´æ–°è´¹ç”¨ç±»å‹
- `DELETE /api/expense-types/:id` - åˆ é™¤è´¹ç”¨ç±»å‹

#### ç»Ÿè®¡æ•°æ®
- `GET /api/stats/overview` - è·å–æ€»è§ˆç»Ÿè®¡
- `GET /api/stats/expenses` - è·å–è´¹ç”¨ç»Ÿè®¡
- `GET /api/stats/users` - è·å–ç”¨æˆ·ç»Ÿè®¡

### æ•°æ®åº“è®¾è®¡

#### ä¸»è¦è¡¨ç»“æ„
- `users` - ç”¨æˆ·è¡¨
- `rooms` - æˆ¿é—´è¡¨
- `room_members` - æˆ¿é—´æˆå‘˜è¡¨
- `expense_types` - è´¹ç”¨ç±»å‹è¡¨
- `expenses` - è´¹ç”¨è®°å½•è¡¨
- `expense_shares` - è´¹ç”¨åˆ†æ‘Šè¡¨
- `bills` - è´¦å•è¡¨
- `bill_items` - è´¦å•é¡¹ç›®è¡¨
- `payments` - æ”¯ä»˜è®°å½•è¡¨
- `payment_methods` - æ”¯ä»˜æ–¹å¼è¡¨
- `disputes` - äº‰è®®è¡¨
- `notifications` - é€šçŸ¥è¡¨

### æµ‹è¯•

#### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œå•å…ƒæµ‹è¯•
npm run test:unit

# è¿è¡Œé›†æˆæµ‹è¯•
npm run test:integration

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

#### æµ‹è¯•è¦†ç›–èŒƒå›´
- ç”¨æˆ·è®¤è¯APIæµ‹è¯•
- æˆ¿é—´ç®¡ç†APIæµ‹è¯•
- è´¹ç”¨ç®¡ç†APIæµ‹è¯•
- è´¦å•ç®¡ç†APIæµ‹è¯•
- ç»Ÿè®¡æ•°æ®APIæµ‹è¯•
- è´¹ç”¨ç±»å‹APIæµ‹è¯•

### ä»£ç è§„èŒƒ

#### åç«¯ä»£ç è§„èŒƒ
- ä½¿ç”¨ESLintè¿›è¡Œä»£ç æ£€æŸ¥
- éµå¾ªAirbnb JavaScripté£æ ¼æŒ‡å—
- ä½¿ç”¨async/awaitå¤„ç†å¼‚æ­¥æ“ä½œ
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶
- è¯¦ç»†çš„APIæ–‡æ¡£æ³¨é‡Š

#### å‰ç«¯ä»£ç è§„èŒƒ
- ä½¿ç”¨ESLint + Prettierè¿›è¡Œä»£ç æ ¼å¼åŒ–
- ç»„ä»¶å‘½åä½¿ç”¨PascalCase
- æ–‡ä»¶å‘½åä½¿ç”¨kebab-case
- ä½¿ç”¨Vue 3 Composition API
- ç»Ÿä¸€çš„APIè¯·æ±‚å°è£…
- æäº¤ä¿¡æ¯ä½¿ç”¨çº¦å®šå¼æäº¤

## ğŸ“„ æ–‡æ¡£

- [APIæ–‡æ¡£](./Server-side/docs/API.md)
- [éƒ¨ç½²æŒ‡å—](./Server-side/docs/DEPLOYMENT.md)
- [æŠ€æœ¯é—®é¢˜è®°å½•](./Server-side/docs/TECHNICAL_ISSUES.md)

## ğŸ§ª æµ‹è¯•

è¿è¡Œæµ‹è¯•ï¼š
```bash
cd Server-side
npm test
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š
- Express.js
- React
- Vite
- PostgreSQL
- Vue.js
- Element Plus