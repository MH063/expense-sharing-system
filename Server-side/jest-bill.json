{"numFailedTestSuites":1,"numFailedTests":1,"numPassedTestSuites":0,"numPassedTests":9,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":1,"numTotalTests":10,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1762152686390,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["BillController单元测试","createBill"],"duration":4,"failureDetails":[{"matcherResult":{"message":"expect(jest.fn()).toHaveBeenCalledTimes(expected)\n\nExpected number of calls: 9\nReceived number of calls: 17","pass":false}}],"failureMessages":["Error: expect(jest.fn()).toHaveBeenCalledTimes(expected)\n\nExpected number of calls: 9\nReceived number of calls: 17\n    at Object.toHaveBeenCalledTimes (C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\tests\\unit\\bill-controller.test.js:124:32)"],"fullName":"BillController单元测试 createBill 应该成功创建账单","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"failed","title":"应该成功创建账单"},{"ancestorTitles":["BillController单元测试","createBill"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"BillController单元测试 createBill 应该在缺少必填字段时返回500错误","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"应该在缺少必填字段时返回500错误"},{"ancestorTitles":["BillController单元测试","createBill"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"BillController单元测试 createBill 应该在用户不是寝室成员时返回403错误","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"应该在用户不是寝室成员时返回403错误"},{"ancestorTitles":["BillController单元测试","getBills"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"BillController单元测试 getBills 应该成功获取账单列表","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"应该成功获取账单列表"},{"ancestorTitles":["BillController单元测试","getBillById"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"BillController单元测试 getBillById 应该成功获取特定账单详情","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"应该成功获取特定账单详情"},{"ancestorTitles":["BillController单元测试","getBillById"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"BillController单元测试 getBillById 应该在账单不存在时返回403错误","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"应该在账单不存在时返回403错误"},{"ancestorTitles":["BillController单元测试","reviewBill"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"BillController单元测试 reviewBill 应该成功审核账单","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"应该成功审核账单"},{"ancestorTitles":["BillController单元测试","reviewBill"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"BillController单元测试 reviewBill 应该在账单不存在时返回403错误","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"应该在账单不存在时返回403错误"},{"ancestorTitles":["BillController单元测试","confirmBillPayment"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"BillController单元测试 confirmBillPayment 应该成功确认账单支付","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"应该成功确认账单支付"},{"ancestorTitles":["BillController单元测试","confirmBillPayment"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"BillController单元测试 confirmBillPayment 应该在分摊ID不存在时返回403错误","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"应该在分摊ID不存在时返回403错误"}],"endTime":1762152686893,"message":"  ● BillController单元测试 › createBill › 应该成功创建账单\n\n    expect(jest.fn()).toHaveBeenCalledTimes(expected)\n\n    Expected number of calls: 9\n    Received number of calls: 17\n\n      122 |       \n      123 |       // 验证数据库查询被调用\n    > 124 |       expect(mockClient.query).toHaveBeenCalledTimes(9);\n          |                                ^\n      125 |       \n      126 |       // 验证连接已释放\n      127 |       expect(mockClient.release).toHaveBeenCalled();\n\n      at Object.toHaveBeenCalledTimes (tests/unit/bill-controller.test.js:124:32)\n","name":"C:\\Users\\MH\\Desktop\\记账系统\\Server-side\\tests\\unit\\bill-controller.test.js","startTime":1762152686436,"status":"failed","summary":""}],"wasInterrupted":false}
